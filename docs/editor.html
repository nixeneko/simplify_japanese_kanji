<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<title>簡体字入力</title>
<style type="text/css">
body {
  margin: 0;
  padding: 0;
}
#inputarea { 
  width: 100%;
  height: 99vh;
  box-sizing: border-box;
  font-size: 200%;
}
</style>
<script type="text/javascript" src="jp2zh.js"></script>
</head>
<body>
<textarea id="inputarea" name="inputarea" placeholder="ここに文章を入力してください"></textarea>

<script type="text/javascript">
//jp2zh_dict
function convert(text){
  for (key in jp2zh_dict){ //重い？
    text = text.replaceAll(key, jp2zh_dict[key]);
  }
  return text;
}

const inputarea = document.getElementById("inputarea");

//inputarea.addEventListener('change', changed);
inputarea.addEventListener('input', changed);

function changed(e) { 
  if(!e.isComposing) {
    console.log(e.srcElement.value);
	e.srcElement.value = convert(e.srcElement.value);
  }
}
</script>
</body>
</html>